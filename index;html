<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bot Trading Crypto</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial;background:#0f172a;color:#fff;padding:20px}
.container{max-width:1800px;margin:0 auto}
h1{text-align:center;margin-bottom:30px}
.dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px}
.card{background:rgba(30,41,59,0.8);border-radius:15px;padding:25px;border:1px solid rgba(255,255,255,0.1)}
.card h2{color:#60a5fa;margin-bottom:20px;border-bottom:2px solid #60a5fa;padding-bottom:10px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px}
.btn-grid{padding:15px;border:2px solid rgba(96,165,250,0.3);background:rgba(15,23,42,0.5);color:#fff;border-radius:10px;cursor:pointer;font-weight:bold}
.btn-grid:hover{border-color:#60a5fa;background:rgba(96,165,250,0.1)}
.btn-grid.active{background:#3b82f6;border-color:#60a5fa}
.input-group{margin-bottom:15px}
.input-group label{display:block;margin-bottom:5px;font-size:14px}
.input-group input,.input-group select{width:100%;padding:12px;border:2px solid rgba(255,255,255,0.1);background:rgba(15,23,42,0.5);color:#fff;border-radius:8px}
.btn{width:100%;padding:15px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;margin-top:10px}
.btn-primary{background:#3b82f6;color:#fff}
.btn-success{background:#10b981;color:#fff}
.btn-danger{background:#ef4444;color:#fff}
.status{padding:10px;border-radius:8px;margin-bottom:15px;text-align:center}
.status.ok{background:rgba(16,185,129,0.2);color:#10b981;border:1px solid #10b981}
.status.ko{background:rgba(239,68,68,0.2);color:#ef4444;border:1px solid #ef4444}
.balance{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:15px}
.balance-item{background:rgba(15,23,42,0.5);padding:15px;border-radius:10px}
.balance-label{font-size:0.9em;color:#94a3b8}
.balance-value{font-size:1.5em;font-weight:bold;color:#60a5fa;margin-top:5px}
.log{max-height:400px;overflow-y:auto;background:rgba(15,23,42,0.5);padding:15px;border-radius:8px;font-family:monospace;font-size:13px}
.log-entry{padding:8px;margin-bottom:5px;border-radius:5px;border-left:3px solid #60a5fa;background:rgba(30,41,59,0.5)}
.log-entry.ok{border-left-color:#10b981}
.log-entry.ko{border-left-color:#ef4444}
</style>
</head>
<body>
<div class="container">
<h1>Bot Trading Crypto</h1>
<div class="dashboard">

<div class="card">
<h2>Blockchain</h2>
<div class="grid">
<button class="btn-grid" id="c1">Ethereum</button>
<button class="btn-grid" id="c2">BSC</button>
<button class="btn-grid" id="c3">Polygon</button>
<button class="btn-grid" id="c4">Arbitrum</button>
</div>
<div id="cstatus" class="status ko">Aucune blockchain</div>
<div class="input-group">
<label>Network</label>
<input type="text" id="cnet" readonly value="Non connecte">
</div>
</div>

<div class="card">
<h2>Wallet</h2>
<div class="grid">
<button class="btn-grid" id="w1">MetaMask</button>
<button class="btn-grid" id="w2">Phantom</button>
<button class="btn-grid" id="w3">Trust</button>
<button class="btn-grid" id="w4">Coinbase</button>
</div>
<div id="wstatus" class="status ko">Aucun wallet</div>
<div class="input-group">
<label>Adresse</label>
<input type="text" id="waddr" readonly>
</div>
<button class="btn btn-primary" id="wconnect">Connecter</button>
<button class="btn btn-primary" id="wadd" style="display:none">Ajouter Tokens</button>
<div class="balance">
<div class="balance-item">
<div class="balance-label">Native</div>
<div class="balance-value" id="bal1">0.00</div>
</div>
<div class="balance-item">
<div class="balance-label">USDT</div>
<div class="balance-value" id="bal2">0.00</div>
</div>
</div>
</div>

<div class="card">
<h2>Configuration</h2>
<div id="bstatus" class="status ko">Bot Arrete</div>
<div class="input-group">
<label>Mode</label>
<select id="mode">
<option value="demo">DEMO</option>
<option value="real">REEL</option>
</select>
</div>
<div class="input-group">
<label>Paire</label>
<select id="pair">
<option>BTC/USDT</option>
<option>ETH/USDT</option>
<option>BNB/USDT</option>
</select>
</div>
<div class="input-group">
<label>Montant</label>
<input type="number" id="amt" value="50" min="10">
</div>
<button class="btn btn-success" id="bstart">Demarrer</button>
<button class="btn btn-danger" id="bstop" style="display:none">Arreter</button>
<div class="balance">
<div class="balance-item">
<div class="balance-label">Trades</div>
<div class="balance-value" id="trades">0</div>
</div>
<div class="balance-item">
<div class="balance-label">PnL</div>
<div class="balance-value" id="pnl">$0.00</div>
</div>
</div>
</div>

<div class="card" style="grid-column:span 2">
<h2>Logs</h2>
<div class="log" id="logs"></div>
</div>

</div>
</div>

<script>
var st={chain:null,wallet:null,waddr:null,run:false,bal:{n:0,u:0},stats:{t:0,p:0}};
var CH={'eth':{id:'0x1',n:'Ethereum',c:'ETH'},'bsc':{id:'0x38',n:'BSC',c:'BNB'},'pol':{id:'0x89',n:'Polygon',c:'MATIC'},'arb':{id:'0xa4b1',n:'Arbitrum',c:'ETH'}};

function L(m,t){
var d=new Date();
var ts=d.getHours()+':'+d.getMinutes()+':'+d.getSeconds();
var e=document.createElement('div');
e.className='log-entry '+(t||'');
e.innerHTML='['+ts+'] '+m;
document.getElementById('logs').insertBefore(e,document.getElementById('logs').firstChild);
}

function SC(id){
document.querySelectorAll('.btn-grid').forEach(function(b){b.classList.remove('active')});
document.getElementById('c'+id).classList.add('active');
var cn=['eth','bsc','pol','arb'][id-1];
st.chain=cn;
document.getElementById('cstatus').className='status ko';
document.getElementById('cstatus').textContent=CH[cn].n+' OK';
document.getElementById('cnet').value=CH[cn].n;
L('Chain '+CH[cn].n+' OK');
}

function SW(id){
document.querySelectorAll('.btn-grid').forEach(function(b){b.classList.remove('active')});
document.getElementById('w'+id).classList.add('active');
st.wallet=['mm','ph','tr','cb'][id-1];
L('Wallet OK');
}

async function CW(){
if(!st.wallet){L('Selectionnez wallet','ko');return}
if(!st.chain){L('Selectionnez chain','ko');return}
if(st.wallet==='mm'){await CM()}else{SD()}
}

async function CM(){
if(typeof window.ethereum==='undefined'){
L('MetaMask manquant','ko');
if(confirm('Installer?'))window.open('https://metamask.io/download/');
return;
}
try{
L('Connexion...','ok');
var a=await window.ethereum.request({method:'eth_requestAccounts'});
st.waddr=a[0];
document.getElementById('waddr').value=a[0];
L('Connecte '+a[0].substring(0,10),'ok');
var ci=CH[st.chain].id;
await window.ethereum.request({method:'wallet_switchEthereumChain',params:[{chainId:ci}]});
var b=await window.ethereum.request({method:'eth_getBalance',params:[a[0],'latest']});
st.bal.n=(parseInt(b,16)/1e18).toFixed(4);
document.getElementById('bal1').textContent=st.bal.n;
document.getElementById('wstatus').className='status ok';
document.getElementById('wstatus').textContent='Connecte';
document.getElementById('cstatus').className='status ok';
document.getElementById('wadd').style.display='block';
L('Balance '+st.bal.n,'ok');
}catch(e){
L('Erreur '+e.message,'ko');
}
}

function SD(){
st.waddr='demo';
document.getElementById('waddr').value='Mode DEMO';
document.getElementById('wstatus').className='status ok';
document.getElementById('wstatus').textContent='DEMO';
document.getElementById('cstatus').className='status ok';
st.bal.n=(Math.random()*2).toFixed(4);
document.getElementById('bal1').textContent=st.bal.n;
L('Mode DEMO actif','ok');
}

async function AT(){
try{
var c=await window.ethereum.request({method:'eth_chainId'});
var tk={'0x1':'0xdAC17F958D2ee523a2206206994597C13D831ec7','0x38':'0x55d398326f99059fF775485246999027B3197955'};
var t=tk[c];
if(!t)return;
await window.ethereum.request({method:'wallet_watchAsset',params:{type:'ERC20',options:{address:t,symbol:'USDT',decimals:c==='0x38'?18:6}}});
L('Token USDT ajoute','ok');
}catch(e){
L('Token deja present','ok');
}
}

function BS(){
if(!st.waddr){L('Connectez wallet','ko');return}
st.run=true;
document.getElementById('bstatus').className='status ok';
document.getElementById('bstatus').textContent='Bot ON';
document.getElementById('bstart').style.display='none';
document.getElementById('bstop').style.display='block';
L('Bot demarre','ok');
setTimeout(function(){if(st.run)TR()},10000);
}

function BP(){
st.run=false;
document.getElementById('bstatus').className='status ko';
document.getElementById('bstatus').textContent='Bot OFF';
document.getElementById('bstart').style.display='block';
document.getElementById('bstop').style.display='none';
L('Bot arrete','ko');
}

async function TR(){
if(!st.run)return;
var am=parseFloat(document.getElementById('amt').value);
var mo=document.getElementById('mode').value;
L('Trade en cours','ok');
if(mo==='real'&&st.waddr!=='demo'){
await RealTrade(am);
}else{
SimTrade(am);
}
if(st.run)setTimeout(TR,15000);
}

async function RealTrade(am){
try{
L('SWAP REEL via 1inch','ok');
var a=await window.ethereum.request({method:'eth_accounts'});
var f=a[0];
var c=await window.ethereum.request({method:'eth_chainId'});
var cids={'0x1':'1','0x38':'56','0x89':'137'};
var cid=cids[c];
if(!cid){L('Chain non supportee','ko');return}
L('Recherche meilleure route...','ok');
var src='0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE';
var dst={'0x1':'0xdAC17F958D2ee523a2206206994597C13D831ec7','0x38':'0x55d398326f99059fF775485246999027B3197955','0x89':'0xc2132D05D31c914a87C6611C10748AEb04B58e8F'}[c];
var url='https://api.1inch.dev/swap/v6.0/'+cid+'/swap?src='+src+'&dst='+dst+'&amount=10000000000000000&from='+f+'&slippage=1';
try{
var r=await fetch(url);
var d=await r.json();
if(!d.tx){L('Pas de route','ko');return}
L('Route trouvee','ok');
L('IMPORTANT: USDT vers '+f.substring(0,10),'ok');
var tx={from:f,to:d.tx.to,data:d.tx.data,value:d.tx.value,gas:d.tx.gas};
var h=await window.ethereum.request({method:'eth_sendTransaction',params:[tx]});
L('TX '+h.substring(0,20),'ok');
var exp={'0x1':'https://etherscan.io/tx/','0x38':'https://bscscan.com/tx/','0x89':'https://polygonscan.com/tx/'}[c];
L('Explorer: '+exp+h,'ok');
st.stats.t++;
document.getElementById('trades').textContent=st.stats.t;
}catch(e){
L('API Error, mode demo','ko');
SimTrade(am);
}
}catch(e){
if(e.code===4001)L('TX refusee','ko');
else L('Erreur '+e.message,'ko');
}
}

function SimTrade(am){
var p=(Math.random()-0.35)*am*0.05;
st.stats.t++;
st.stats.p+=p;
L('Trade simule '+(p>0?'PROFIT':'PERTE')+' '+p.toFixed(2),p>0?'ok':'ko');
document.getElementById('trades').textContent=st.stats.t;
document.getElementById('pnl').textContent='$'+st.stats.p.toFixed(2);
}

document.getElementById('c1').onclick=function(){SC(1)};
document.getElementById('c2').onclick=function(){SC(2)};
document.getElementById('c3').onclick=function(){SC(3)};
document.getElementById('c4').onclick=function(){SC(4)};
document.getElementById('w1').onclick=function(){SW(1)};
document.getElementById('w2').onclick=function(){SW(2)};
document.getElementById('w3').onclick=function(){SW(3)};
document.getElementById('w4').onclick=function(){SW(4)};
document.getElementById('wconnect').onclick=CW;
document.getElementById('wadd').onclick=AT;
document.getElementById('bstart').onclick=BS;
document.getElementById('bstop').onclick=BP;

L('Systeme OK','ok');
L('1. Selectionnez blockchain','ok');
L('2. Connectez wallet','ok');
L('3. Demarrez bot','ok');
</script>
</body>
</html>
